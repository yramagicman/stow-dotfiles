#!/usr/bin/env zsh
p="$HOME/.vim/config/"
msg=$(git log -n 1 | tail -n 1)
echo "\" This file is automatically generated from the contents of
\" https://github.com/yramagicman/dotfiles/tree/master/.vim/config\n\n" > ~/Gits/mobileVimrc/.vimrc

/bin/cat -s $p*".vim" |\
# remove fugitive
grep -v fugitive |\
sed 's/set cc=81/set cc=0/'|\
#swap color scheme
sed 's/muttclone/default/' |\
grep -v 'source ~/.vim/colors/'|\
#sed 's/background=dark/background=light/' |\
#remove empty lines
egrep -v ^' '\{0,50}$|\
## I probably don't need to remove empty lines twice, but oh well
grep -v ^$ >> ~/Gits/mobileVimrc/.vimrc
#commit change and push to github
builtin cd ~/Gits/mobileVimrc/
pwd
git add -fv ./.vimrc
git commit -m "$msg"
git push
